<html>
<head>
    <meta name="description" content="New Zealand BGP Topology Map derived from BGP data"/>
    <meta name="keywords" content="New Zealand,BGP,Topology,RouteViews,Internet Exchange,NZRS"/>
<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon"/>
<link rel="stylesheet" href="/styles/vis.min.css">
<title>New BGP Map</title>
</head>
  <body>
    <div id="bgpvis"></div>

    <script src="/scripts/vis.min.js"></script>
    <script src="/scripts/jquery-1.10.2.js"></script>
  <script type="text/javascript">
  // create an array with nodes
  var nodes = [
    {id: 1, label: 'Node 1', value: 10, group: 'alpha'},
    {id: 2, label: 'Node 2', value: 15, group: 'beta'},
    {id: 3, label: 'Node 3', value: 20, group: 'alpha'},
    {id: 4, label: 'Node 4', value: 25, group: 'beta'},
    {id: 5, label: 'Node 5', value: 30, group: 'alpha'}
  ];

  // create an array with edges
  var edges = [
    {from: 1, to: 2},
    {from: 1, to: 3},
    {from: 2, to: 4},
    {from: 2, to: 5}
  ];

  function onDataReceived(dataset) {
      // create a network
      var container = document.getElementById('bgpvis');
      var data= {
        nodes: dataset['nodes'],
        edges: dataset['edges'],
      };
      var options = {
        autoResize: true,
        width: '100%',
        height: '100%',
        configurePhysics: true,
        interaction: {
            dragNodes: false,
            hover: true,
            hoverSelectedEdges: true,
            navigationButtons: true,
            zoomView: true,
            selectConnectedEdges: false,
            selectable: false,
            tooltipDelay: 150
        },
        nodes: {
          shape: 'dot',
          fontColor: 'black',
          scaleFontWithValue: true,
          fontDrawThreshold: 10,
          fontSizeMin: 10,
          fontSizeMax: 20,
          scaling: {
            min: 5,
            max: 60
          }
        },
        edges: {
          color: {
            color: '#D9D9D9',
            highlight: '#828282',
            opacity: 0.3
          },
          smooth: false
        },
        physics: {
          barnesHut: {
            gravitationalConstant: -4000,
            centralGravity: 0.35,
            springLength: 250,
            springConstant: 0.035,
            damping: 0.10,
            avoidOverlap: 0.3
          },
          stabilization: {
            enabled: true,
            iterations: 500,
            updateInterval: 50
          }
        },
        groups: {
          AU: {
            color: {
              background: 'yellow',
              border: 'white'
            }
          },
          NZ: {
            color: {
              background: 'black',
              border: 'grey'
            }
          },
          priv: {
            color: {
              background: 'blue',
              border: 'lightblue'
            }
          },
          other: {
            color: {
              background: 'darkgreen',
              border: 'limegreen'
            }
          },
          IX: {
            color: {
              background: 'red',
              border: 'pink'
            }
          }
        }
      };
      var network = new vis.Network(container, data, options);
  }

  $.ajax({
        url: "/misc/data/nz-bgp-map.vis.json",
        method: 'GET',
        dataType: 'json',
        success: onDataReceived,
        error: function(_xhr, msg, _error) { alert(msg); }
    });
</script>

  </body>
</html>
